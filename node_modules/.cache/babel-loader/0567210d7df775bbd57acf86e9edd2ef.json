{"remainingRequest":"/home/kelraf/code_it/vue/spider-ui/spider-ui/node_modules/babel-loader/lib/index.js!/home/kelraf/code_it/vue/spider-ui/spider-ui/node_modules/eslint-loader/index.js??ref--13-0!/home/kelraf/code_it/vue/spider-ui/spider-ui/src/auth/js/index.js","dependencies":[{"path":"/home/kelraf/code_it/vue/spider-ui/spider-ui/src/auth/js/index.js","mtime":1576243044000},{"path":"/home/kelraf/code_it/vue/spider-ui/spider-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/kelraf/code_it/vue/spider-ui/spider-ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/kelraf/code_it/vue/spider-ui/spider-ui/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.string.sub\";\nimport \"core-js/modules/es6.function.name\";\nimport _classCallCheck from \"/home/kelraf/code_it/vue/spider-ui/spider-ui/node_modules/@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/kelraf/code_it/vue/spider-ui/spider-ui/node_modules/@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/kelraf/code_it/vue/spider-ui/spider-ui/node_modules/@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/kelraf/code_it/vue/spider-ui/spider-ui/node_modules/@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/home/kelraf/code_it/vue/spider-ui/spider-ui/node_modules/@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/kelraf/code_it/vue/spider-ui/spider-ui/node_modules/@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"/home/kelraf/code_it/vue/spider-ui/spider-ui/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport EventEmitter from 'events';\nimport auth0 from 'auth0-js';\nimport config from \"../../config.json\";\nvar userlogin = 'islogged';\nvar loginExpiryKey = 'tokenExpiry';\nvar Userinfo = 'userinfo';\nvar localStorageKey = 'loggedIn';\nvar auth1 = new auth0.WebAuth({\n  domain: config.auth0.domain,\n  clientID: config.auth0.clientID,\n  responseType: 'id_token',\n  redirectUri: window.location.origin + process.env.BASE_URL + \"callback\",\n  scope: 'openid profile' // define the scopes you want to use\n\n});\n\nvar Auth =\n/*#__PURE__*/\nfunction (_EventEmitter) {\n  _inherits(Auth, _EventEmitter);\n\n  function Auth() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Auth);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Auth)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"authToken\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"userProfile\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"tokenExpiry\", null);\n\n    return _this;\n  }\n\n  _createClass(Auth, [{\n    key: \"localLogin\",\n    // Login With Firebase\n    value: function localLogin(authResult) {\n      this.tokenExpiry = new Date();\n      localStorage.setItem(loginExpiryKey, this.tokenExpiry);\n      localStorage.setItem(userlogin, 'true');\n      localStorage.setItem(Userinfo, JSON.stringify({\n        displayName: authResult.user.displayName,\n        email: authResult.user.email,\n        photoURL: authResult.user.photoURL\n      }));\n    }\n  }, {\n    key: \"Logout\",\n    value: function Logout() {\n      localStorage.removeItem(loginExpiryKey);\n      localStorage.removeItem(userlogin);\n      localStorage.removeItem(Userinfo);\n    }\n  }, {\n    key: \"isAuthenticated\",\n    value: function isAuthenticated() {\n      return new Date(Date.now()) != new Date(localStorage.getItem(loginExpiryKey)) && localStorage.getItem(userlogin) === 'true';\n    } // login with Auth0\n\n  }, {\n    key: \"login\",\n    value: function login() {\n      auth1.authorize();\n    } // Handle Auth0 Callback\n\n  }, {\n    key: \"handleAuthentication\",\n    value: function handleAuthentication() {\n      var _this2 = this;\n\n      return new Promise(function (resolve, reject) {\n        auth1.parseHash(function (err, authResult) {\n          console.log('authResult', authResult);\n\n          if (authResult.idToken) {\n            console.log(\"Data\", authResult);\n\n            _this2.localAuthLogin(authResult);\n\n            resolve(authResult);\n          } else if (err) {\n            console.log(\"Error Occured\", err.message);\n            return reject(err);\n          }\n        });\n      });\n    }\n  }, {\n    key: \"localAuthLogin\",\n    value: function localAuthLogin(authResult) {\n      this.idToken = authResult.idToken;\n      this.userProfile = authResult.idTokenPayload;\n      this.tokenExpiry = new Date(this.userProfile.exp * 1000);\n      console.log(\"userProfile\", this.userProfile);\n      localStorage.setItem(loginExpiryKey, this.tokenExpiry);\n      localStorage.setItem(localStorageKey, 'true');\n      localStorage.setItem(Userinfo, JSON.stringify({\n        displayName: this.userProfile.name,\n        email: this.userProfile.email,\n        photoURL: this.userProfile.picture,\n        providerId: this.userProfile.sub.substr(0, this.userProfile.sub.indexOf('|')),\n        uid: this.userProfile.sub\n      }));\n    }\n  }, {\n    key: \"logOut\",\n    value: function logOut() {\n      localStorage.removeItem(localStorageKey);\n      localStorage.removeItem(loginExpiryKey);\n      localStorage.removeItem(Userinfo);\n      this.idToken = null;\n      this.tokenExpiry = null;\n      this.profile = null;\n      auth1.logout({\n        returnTo: window.location.origin + process.env.BASE_URL\n      });\n    }\n  }, {\n    key: \"isAuthenticatedUser\",\n    value: function isAuthenticatedUser() {\n      return new Date(Date.now()) < new Date(localStorage.getItem(loginExpiryKey)) && localStorage.getItem(localStorageKey) === 'true';\n    }\n  }]);\n\n  return Auth;\n}(EventEmitter);\n\nexport default new Auth();",{"version":3,"sources":["/home/kelraf/code_it/vue/spider-ui/spider-ui/src/auth/js/index.js"],"names":["EventEmitter","auth0","config","userlogin","loginExpiryKey","Userinfo","localStorageKey","auth1","WebAuth","domain","clientID","responseType","redirectUri","window","location","origin","process","env","BASE_URL","scope","Auth","authResult","tokenExpiry","Date","localStorage","setItem","JSON","stringify","displayName","user","email","photoURL","removeItem","now","getItem","authorize","Promise","resolve","reject","parseHash","err","console","log","idToken","localAuthLogin","message","userProfile","idTokenPayload","exp","name","picture","providerId","sub","substr","indexOf","uid","profile","logout","returnTo"],"mappings":"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","sourcesContent":["import EventEmitter from 'events';\nimport auth0 from 'auth0-js'\nimport config from '../../config.json'\n\nconst userlogin = 'islogged';\nconst loginExpiryKey = 'tokenExpiry';\nconst Userinfo = 'userinfo';\nconst localStorageKey = 'loggedIn';\nconst auth1 = new auth0.WebAuth({\n    domain: config.auth0.domain,\n    clientID: config.auth0.clientID,\n    responseType: 'id_token',\n    redirectUri:  window.location.origin + process.env.BASE_URL + \"callback\",\n    scope: 'openid profile' // define the scopes you want to use\n})\n\nclass Auth extends EventEmitter {\n    authToken = null\n    userProfile = null\n    tokenExpiry = null \n    // Login With Firebase\n    localLogin(authResult) {        \n        this.tokenExpiry = new Date();\n        localStorage.setItem(loginExpiryKey, this.tokenExpiry);\n        localStorage.setItem(userlogin, 'true');\n        localStorage.setItem(Userinfo, JSON.stringify({\n            displayName : authResult.user.displayName,\n            email : authResult.user.email,\n            photoURL : authResult.user.photoURL,\n        }));\n    }\n\n    Logout() {\n        localStorage.removeItem(loginExpiryKey);\n        localStorage.removeItem(userlogin);\n        localStorage.removeItem(Userinfo);\n    }\n\n    isAuthenticated() {\n        return (\n            new Date(Date.now()) !=  new Date(localStorage.getItem(loginExpiryKey)) &&\n            localStorage.getItem(userlogin) === 'true'\n        );\n    }\n\n    // login with Auth0\n    login () {\n        auth1.authorize()\n    }\n\n    // Handle Auth0 Callback\n    handleAuthentication () {\n    return new Promise((resolve, reject) => {\n      auth1.parseHash((err, authResult) => {\n        console.log('authResult', authResult);\n        if (authResult.idToken) {\n            console.log(\"Data\", authResult)\n            this.localAuthLogin(authResult);\n            resolve(authResult)  \n        }\n        else if (err) {\n            console.log(\"Error Occured\", err.message)\n            return reject(err)\n        }\n        })\n      })\n    } \n\n    localAuthLogin(authResult) {        \n        this.idToken = authResult.idToken;\n        this.userProfile = authResult.idTokenPayload;\n        this.tokenExpiry = new Date(this.userProfile.exp * 1000);\n        console.log(\"userProfile\", this.userProfile)\n        localStorage.setItem(loginExpiryKey, this.tokenExpiry)\n        localStorage.setItem(localStorageKey, 'true');\n        localStorage.setItem(Userinfo, JSON.stringify({\n            displayName: this.userProfile.name,\n            email: this.userProfile.email,\n            photoURL: this.userProfile.picture,\n            providerId: this.userProfile.sub.substr(0, this.userProfile.sub.indexOf('|')),\n            uid: this.userProfile.sub\n        }))\n    }\n\n    logOut() {\n        localStorage.removeItem(localStorageKey);\n        localStorage.removeItem(loginExpiryKey);\n        localStorage.removeItem(Userinfo);\n        this.idToken = null;\n        this.tokenExpiry = null;\n        this.profile = null;\n        auth1.logout({\n            returnTo: window.location.origin + process.env.BASE_URL\n        })\n    }\n\n    isAuthenticatedUser() {        \n        return (\n            new Date(Date.now()) < new Date(localStorage.getItem(loginExpiryKey)) &&\n            localStorage.getItem(localStorageKey) === 'true'\n        );\n    }\n}\n\nexport default new Auth();\n"]}]}